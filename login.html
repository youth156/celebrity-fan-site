<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-lang-key="login-title">ç²‰ä¸ç¤¾åŒº - ç™»å½•æ³¨å†Œ</title>
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6C38FF', // ä¸»è‰²è°ƒï¼šç´«è‰²ï¼Œä»£è¡¨åˆ›é€ åŠ›å’Œç‹¬ç‰¹æ€§
                        secondary: '#FF5E7D', // è¾…åŠ©è‰²ï¼šç²‰è‰²ï¼Œä»£è¡¨çƒ­æƒ…å’Œæ´»åŠ›
                        dark: '#1A1A2E', // æ·±è‰²èƒŒæ™¯
                        light: '#F7F7F9', // æµ…è‰²èƒŒæ™¯
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        display: ['Montserrat', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <!-- è‡ªå®šä¹‰å·¥å…·ç±» -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-custom {
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
        }
    </style>
    <!-- é¢„åŠ è½½å­—ä½“ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-dark to-dark/90 min-h-screen flex items-center justify-center font-sans text-white overflow-x-hidden">
    <!-- å¯¼èˆªæ  -->
    <header class="fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <a href="index.html" class="flex items-center space-x-2">
                    <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
                        <i class="fa fa-star text-white text-xl"></i>
                    </div>
                    <span class="text-2xl font-display font-bold text-white text-shadow">BoomRaveewit</span>
                </a>
                
                <!-- è¯­è¨€åˆ‡æ¢ä¸‹æ‹‰èœå• -->
                <div id="language-selector" class="relative">
                    <button id="language-btn" class="flex items-center space-x-2 bg-white/10 hover:bg-primary px-3 py-1.5 rounded-full text-white transition-custom">
                        <i class="fa fa-globe"></i>
                        <span id="current-language">ä¸­æ–‡</span>
                        <i class="fa fa-chevron-down text-xs"></i>
                    </button>
                    <div id="language-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl overflow-hidden z-10 hidden">
                        <a href="#" data-lang="zh" class="block px-4 py-2 hover:bg-primary/10 text-gray-800 transition-custom">
                            <span class="flag-icon">ğŸ‡¨ğŸ‡³</span> ä¸­æ–‡
                        </a>
                        <a href="#" data-lang="en" class="block px-4 py-2 hover:bg-primary/10 text-gray-800 transition-custom">
                            <span class="flag-icon">ğŸ‡¬ğŸ‡§</span> English
                        </a>
                        <a href="#" data-lang="th" class="block px-4 py-2 hover:bg-primary/10 text-gray-800 transition-custom">
                            <span class="flag-icon">ğŸ‡¹ğŸ‡­</span> à¸ à¸²à¸©à¸²à¹„à¸—à¸¢
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ç™»å½•/æ³¨å†Œè¡¨å•å®¹å™¨ -->
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="max-w-md mx-auto bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl overflow-hidden">
            <!-- è¡¨å•å¤´éƒ¨ -->
            <div class="bg-primary p-6 text-center">
                <h2 class="text-2xl font-display font-bold" data-lang-key="community-title">ç²‰ä¸ç¤¾åŒº</h2>
                <p class="text-white/80 mt-1" data-lang-key="community-welcome">åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºï¼Œä¸å…¶ä»–ç²‰ä¸ä¸€èµ·äº’åŠ¨</p>
            </div>
            
            <!-- è¡¨å•æ ‡ç­¾åˆ‡æ¢ -->
            <div class="flex border-b border-white/20">
                <button id="login-tab" class="flex-1 py-4 px-6 font-medium text-white border-b-2 border-primary transition-custom" data-lang-key="login">ç™»å½•</button>
                <button id="register-tab" class="flex-1 py-4 px-6 font-medium text-white/70 hover:text-white transition-custom" data-lang-key="register">æ³¨å†Œ</button>
            </div>
            
            <!-- ç™»å½•è¡¨å• -->
            <div id="login-form" class="p-6">
                <!-- é”™è¯¯æç¤ºåŒºåŸŸ -->
                <div id="login-error" class="mb-4 p-3 bg-red-500/20 border border-red-500/40 rounded-lg hidden">
                    <i class="fa fa-exclamation-circle mr-2"></i>
                    <span id="login-error-message"></span>
                </div>
                
                <div class="mb-4">
                    <label for="login-username" class="block text-sm font-medium mb-2" data-lang-key="username">ç”¨æˆ·å</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="login-username" class="w-full pl-10 pr-3 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder-white/50" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" data-lang-key="username-placeholder">
                    </div>
                    <p class="mt-1 text-xs text-red-400 hidden" id="login-username-error" data-lang-key="username-required">ç”¨æˆ·åä¸èƒ½ä¸ºç©º</p>
                </div>
                
                <div class="mb-6">
                    <label for="login-password" class="block text-sm font-medium mb-2" data-lang-key="password">å¯†ç </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa fa-lock text-gray-400"></i>
                        </div>
                        <input type="password" id="login-password" class="w-full pl-10 pr-10 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder-white/50" placeholder="è¯·è¾“å…¥å¯†ç " data-lang-key="password-placeholder">
                        <button type="button" id="toggle-login-password" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-custom">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                    <p class="mt-1 text-xs text-red-400 hidden" id="login-password-error" data-lang-key="password-required">å¯†ç ä¸èƒ½ä¸ºç©º</p>
                </div>
                
                <div class="flex items-center justify-between mb-6">
                    <label class="flex items-center">
                        <input type="checkbox" id="remember-me" class="form-checkbox rounded bg-white/20 text-primary focus:ring-primary h-4 w-4">
                        <span class="ml-2 text-sm text-white/80" data-lang-key="remember-me">è®°ä½æˆ‘</span>
                    </label>
                    <button id="forgot-password" class="text-sm text-primary hover:text-secondary transition-custom" data-lang-key="forgot-password">å¿˜è®°å¯†ç ï¼Ÿ</button>
                </div>
                
                <button id="login-submit" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-custom transform hover:scale-[1.02] flex items-center justify-center">
                    <i class="fa fa-sign-in mr-2"></i>
                    <span data-lang-key="login-btn">ç™»å½•</span>
                </button>
            </div>
            
            <!-- æ³¨å†Œè¡¨å• (åˆå§‹éšè—) -->
            <div id="register-form" class="p-6 hidden">
                <!-- é”™è¯¯æç¤ºåŒºåŸŸ -->
                <div id="register-error" class="mb-4 p-3 bg-red-500/20 border border-red-500/40 rounded-lg hidden">
                    <i class="fa fa-exclamation-circle mr-2"></i>
                    <span id="register-error-message"></span>
                </div>
                
                <!-- æˆåŠŸæç¤ºåŒºåŸŸ -->
                <div id="register-success" class="mb-4 p-3 bg-green-500/20 border border-green-500/40 rounded-lg hidden">
                    <i class="fa fa-check-circle mr-2"></i>
                    <span id="register-success-message" data-lang-key="register-success">æ³¨å†ŒæˆåŠŸï¼æ­£åœ¨è·³è½¬åˆ°ç™»å½•...</span>
                </div>
                
                <div class="mb-4">
                    <label for="register-username" class="block text-sm font-medium mb-2" data-lang-key="username">ç”¨æˆ·å</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="register-username" class="w-full pl-10 pr-3 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder-white/50" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" data-lang-key="username-placeholder">
                    </div>
                    <p class="mt-1 text-xs text-red-400 hidden" id="register-username-error"></p>
                </div>
                
                <div class="mb-4">
                    <label for="register-email" class="block text-sm font-medium mb-2" data-lang-key="email">é‚®ç®±</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa fa-envelope text-gray-400"></i>
                        </div>
                        <input type="email" id="register-email" class="w-full pl-10 pr-3 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder-white/50" placeholder="è¯·è¾“å…¥é‚®ç®±" data-lang-key="email-placeholder">
                    </div>
                    <p class="mt-1 text-xs text-red-400 hidden" id="register-email-error"></p>
                </div>
                
                <div class="mb-4">
                    <label for="register-password" class="block text-sm font-medium mb-2" data-lang-key="password">å¯†ç </label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fa fa-lock text-gray-400"></i>
                        </div>
                        <input type="password" id="register-password" class="w-full pl-10 pr-10 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-white placeholder-white/50" placeholder="è¯·è®¾ç½®å¯†ç " data-lang-key="set-password-placeholder">
                        <button type="button" id="toggle-register-password" class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-white transition-custom">
                            <i class="fa fa-eye-slash"></i>
                        </button>
                    </div>
                    <p class="mt-1 text-xs text-red-400 hidden" id="register-password-error"></p>
                </div>
                
                <div class="mb-6">
                    <label class="flex items-start">
                        <input type="checkbox" id="agree-terms" class="form-checkbox rounded bg-white/20 text-primary focus:ring-primary h-4 w-4 mt-1">
                        <span class="ml-2 text-sm text-white/80" data-lang-key="agree-terms">æˆ‘å·²é˜…è¯»å¹¶åŒæ„<a href="#" class="text-primary hover:underline">ç”¨æˆ·åè®®</a>å’Œ<a href="#" class="text-primary hover:underline">éšç§æ”¿ç­–</a></span>
                    </label>
                    <p class="mt-1 text-xs text-red-400 hidden" id="terms-error" data-lang-key="agree-terms-required">è¯·é˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–</p>
                </div>
                
                <button id="register-submit" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-custom transform hover:scale-[1.02] flex items-center justify-center">
                    <i class="fa fa-user-plus mr-2"></i>
                    <span data-lang-key="register-btn">æ³¨å†Œ</span>
                </button>
            </div>
            
            <!-- åˆ†éš”çº¿ -->
            <div class="relative py-4">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-white/20"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-dark text-white/70" data-lang-key="or">æˆ–</span>
                </div>
            </div>
            
            <!-- ç¬¬ä¸‰æ–¹ç™»å½• -->
            <div class="px-6 pb-6 grid grid-cols-3 gap-3">
                <button class="flex items-center justify-center w-full h-10 rounded-lg bg-white/10 hover:bg-white/20 transition-custom">
                    <i class="fa fa-weibo text-white text-xl"></i>
                </button>
                <button class="flex items-center justify-center w-full h-10 rounded-lg bg-white/10 hover:bg-white/20 transition-custom">
                    <i class="fa fa-wechat text-white text-xl"></i>
                </button>
                <button class="flex items-center justify-center w-full h-10 rounded-lg bg-white/10 hover:bg-white/20 transition-custom">
                    <i class="fa fa-qq text-white text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- ç¤¾åŒºç‰¹è‰² -->
        <div class="mt-16 max-w-3xl mx-auto">
            <h3 class="text-2xl font-display font-bold text-center mb-10" data-lang-key="community-features">ç¤¾åŒºç‰¹è‰²</h3>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-white/5 backdrop-blur-sm p-6 rounded-xl text-center transform transition-custom hover:-translate-y-1 hover:bg-white/10">
                    <div class="w-14 h-14 rounded-full bg-primary/20 flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-users text-primary text-xl"></i>
                    </div>
                    <h4 class="text-lg font-semibold mb-2" data-lang-key="fan-interaction">ç²‰ä¸äº’åŠ¨</h4>
                    <p class="text-white/70 text-sm" data-lang-key="fan-interaction-desc">ä¸å…¶ä»–ç²‰ä¸äº¤æµï¼Œåˆ†äº«å¯¹Boomçš„å–œçˆ±</p>
                </div>
                <div class="bg-white/5 backdrop-blur-sm p-6 rounded-xl text-center transform transition-custom hover:-translate-y-1 hover:bg-white/10">
                    <div class="w-14 h-14 rounded-full bg-primary/20 flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-bullhorn text-primary text-xl"></i>
                    </div>
                    <h4 class="text-lg font-semibold mb-2" data-lang-key="exclusive-news">ç‹¬å®¶åŠ¨æ€</h4>
                    <p class="text-white/70 text-sm" data-lang-key="exclusive-news-desc">è·å–Boomçš„æœ€æ–°æ¶ˆæ¯å’Œç‹¬å®¶å†…å®¹</p>
                </div>
                <div class="bg-white/5 backdrop-blur-sm p-6 rounded-xl text-center transform transition-custom hover:-translate-y-1 hover:bg-white/10">
                    <div class="w-14 h-14 rounded-full bg-primary/20 flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-gift text-primary text-xl"></i>
                    </div>
                    <h4 class="text-lg font-semibold mb-2" data-lang-key="fan-benefits">ç²‰ä¸ç¦åˆ©</h4>
                    <p class="text-white/70 text-sm" data-lang-key="fan-benefits-desc">å‚ä¸æ´»åŠ¨èµ¢å–å‘¨è¾¹ï¼Œæœ‰æœºä¼šä¸Boomè¿‘è·ç¦»æ¥è§¦</p>
                </div>
            </div>
        </div>
    </div>

    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <a href="#" class="fixed bottom-8 right-8 w-12 h-12 rounded-full bg-primary flex items-center justify-center text-white shadow-lg hover:bg-secondary transition-custom z-40">
        <i class="fa fa-arrow-up"></i>
    </a>

    <!-- JavaScript -->
    <script>
        // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        
        loginTab.addEventListener('click', () => {
            loginTab.classList.add('border-primary', 'text-white');
            loginTab.classList.remove('text-white/70');
            registerTab.classList.remove('border-primary', 'text-white');
            registerTab.classList.add('text-white/70');
            loginForm.classList.remove('hidden');
            registerForm.classList.add('hidden');
            // éšè—æ‰€æœ‰æ¶ˆæ¯
            document.getElementById('login-error').classList.add('hidden');
            document.getElementById('register-error').classList.add('hidden');
            document.getElementById('register-success').classList.add('hidden');
        });
        
        registerTab.addEventListener('click', () => {
            registerTab.classList.add('border-primary', 'text-white');
            registerTab.classList.remove('text-white/70');
            loginTab.classList.remove('border-primary', 'text-white');
            loginTab.classList.add('text-white/70');
            registerForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
            // éšè—æ‰€æœ‰æ¶ˆæ¯
            document.getElementById('login-error').classList.add('hidden');
            document.getElementById('register-error').classList.add('hidden');
            document.getElementById('register-success').classList.add('hidden');
        });
        
        // å¯†ç å¯è§æ€§åˆ‡æ¢
        function setupPasswordToggle(toggleBtnId, passwordInputId) {
            const toggleBtn = document.getElementById(toggleBtnId);
            const passwordInput = document.getElementById(passwordInputId);
            
            toggleBtn.addEventListener('click', () => {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                // åˆ‡æ¢å›¾æ ‡
                const icon = toggleBtn.querySelector('i');
                if (type === 'text') {
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                } else {
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                }
            });
        }
        
        setupPasswordToggle('toggle-login-password', 'login-password');
        setupPasswordToggle('toggle-register-password', 'register-password');
        
        // è¡¨å•éªŒè¯å‡½æ•°
        function showError(element, message) {
            const errorElement = document.getElementById(element);
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
            return false;
        }
        
        function hideError(element) {
            const errorElement = document.getElementById(element);
            errorElement.classList.add('hidden');
        }
        
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        function validatePassword(password) {
            // å¯†ç è‡³å°‘åŒ…å«8ä¸ªå­—ç¬¦ï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ªå­—æ¯å’Œä¸€ä¸ªæ•°å­—
            return password.length >= 8 && /[a-zA-Z]/.test(password) && /[0-9]/.test(password);
        }
        
        // æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®åº“
        const mockUsers = [];
        
        // åŠ è½½ä¿å­˜çš„ç”¨æˆ·æ•°æ®
        function loadUsers() {
            const savedUsers = localStorage.getItem('mockUsers');
            if (savedUsers) {
                try {
                    Object.assign(mockUsers, JSON.parse(savedUsers));
                } catch (e) {
                    console.error('åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥:', e);
                }
            }
        }
        
        // ä¿å­˜ç”¨æˆ·æ•°æ®
        function saveUsers() {
            localStorage.setItem('mockUsers', JSON.stringify(mockUsers));
        }
        
        // åˆå§‹åŒ–ç”¨æˆ·æ•°æ®
        loadUsers();
        
        // ç™»å½•åŠŸèƒ½
        document.getElementById('login-submit').addEventListener('click', function() {
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            const rememberMe = document.getElementById('remember-me').checked;
            
            let isValid = true;
            
            // æ¸…ç©ºä¹‹å‰çš„é”™è¯¯
            hideError('login-username-error');
            hideError('login-password-error');
            document.getElementById('login-error').classList.add('hidden');
            
            // éªŒè¯ç”¨æˆ·å
            if (!username) {
                showError('login-username-error', translations[currentLang]['username-required'] || 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');
                isValid = false;
            }
            
            // éªŒè¯å¯†ç 
            if (!password) {
                showError('login-password-error', translations[currentLang]['password-required'] || 'å¯†ç ä¸èƒ½ä¸ºç©º');
                isValid = false;
            }
            
            if (!isValid) return;
            
            // æŸ¥æ‰¾ç”¨æˆ·
            const user = mockUsers.find(u => u.username === username);
            
            if (user && user.password === password) {
                // ä¿å­˜ç™»å½•çŠ¶æ€
                const userData = { username: user.username, email: user.email };
                
                if (rememberMe) {
                    localStorage.setItem('user', JSON.stringify(userData));
                } else {
                    sessionStorage.setItem('user', JSON.stringify(userData));
                }
                
                // æ˜¾ç¤ºæˆåŠŸæç¤º
                alert(translations[currentLang]['login-success'] || 'ç™»å½•æˆåŠŸï¼');
                
                // æ£€æŸ¥æ˜¯å¦æœ‰è¿”å›URLå‚æ•°
                const urlParams = new URLSearchParams(window.location.search);
                const redirectUrl = urlParams.get('redirect') || 'index.html';
                
                // è·³è½¬åˆ°æŒ‡å®šé¡µé¢æˆ–é¦–é¡µ
                window.location.href = redirectUrl;
            } else {
                // æ˜¾ç¤ºç™»å½•é”™è¯¯
                const errorElement = document.getElementById('login-error');
                const errorMessage = document.getElementById('login-error-message');
                errorMessage.textContent = translations[currentLang]['login-error'] || 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯';
                errorElement.classList.remove('hidden');
            }
        });
        
        // æ³¨å†ŒåŠŸèƒ½
        document.getElementById('register-submit').addEventListener('click', function() {
            const username = document.getElementById('register-username').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            
            let isValid = true;
            
            // æ¸…ç©ºä¹‹å‰çš„é”™è¯¯
            hideError('register-username-error');
            hideError('register-email-error');
            hideError('register-password-error');
            hideError('terms-error');
            document.getElementById('register-error').classList.add('hidden');
            document.getElementById('register-success').classList.add('hidden');
            
            // éªŒè¯ç”¨æˆ·å
            if (!username) {
                showError('register-username-error', translations[currentLang]['username-required'] || 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º');
                isValid = false;
            } else if (username.length < 3) {
                showError('register-username-error', translations[currentLang]['username-too-short'] || 'ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦');
                isValid = false;
            } else if (mockUsers.some(u => u.username === username)) {
                showError('register-username-error', translations[currentLang]['username-exists'] || 'ç”¨æˆ·åå·²å­˜åœ¨');
                isValid = false;
            }
            
            // éªŒè¯é‚®ç®±
            if (!email) {
                showError('register-email-error', translations[currentLang]['email-required'] || 'é‚®ç®±ä¸èƒ½ä¸ºç©º');
                isValid = false;
            } else if (!validateEmail(email)) {
                showError('register-email-error', translations[currentLang]['email-invalid'] || 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€');
                isValid = false;
            } else if (mockUsers.some(u => u.email === email)) {
                showError('register-email-error', translations[currentLang]['email-exists'] || 'è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ');
                isValid = false;
            }
            
            // éªŒè¯å¯†ç 
            if (!password) {
                showError('register-password-error', translations[currentLang]['password-required'] || 'å¯†ç ä¸èƒ½ä¸ºç©º');
                isValid = false;
            } else if (!validatePassword(password)) {
                showError('register-password-error', translations[currentLang]['password-weak'] || 'å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—');
                isValid = false;
            }
            
            // éªŒè¯åŒæ„æ¡æ¬¾
            if (!agreeTerms) {
                showError('terms-error', translations[currentLang]['agree-terms-required'] || 'è¯·é˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–');
                isValid = false;
            }
            
            if (!isValid) return;
            
            // æ·»åŠ æ–°ç”¨æˆ·
            mockUsers.push({ username, email, password });
            saveUsers();
            
            // æ˜¾ç¤ºæ³¨å†ŒæˆåŠŸ
            document.getElementById('register-success').classList.remove('hidden');
            
            // 3ç§’ååˆ‡æ¢åˆ°ç™»å½•è¡¨å•
            setTimeout(() => {
                loginTab.click();
                // è‡ªåŠ¨å¡«å……ç”¨æˆ·ååˆ°ç™»å½•è¡¨å•
                document.getElementById('login-username').value = username;
                document.getElementById('login-password').focus();
            }, 3000);
        });
        
        // å¿˜è®°å¯†ç åŠŸèƒ½
        document.getElementById('forgot-password').addEventListener('click', function(e) {
            e.preventDefault();
            alert(translations[currentLang]['forgot-password-message'] || 'è¯·è”ç³»ç®¡ç†å‘˜é‡ç½®å¯†ç ã€‚');
        });
        
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
        function checkLoginStatus() {
            const user = localStorage.getItem('user') || sessionStorage.getItem('user');
            if (user) {
                try {
                    const userData = JSON.parse(user);
                    console.log('ç”¨æˆ·å·²ç™»å½•:', userData);
                    // è¿™é‡Œå¯ä»¥æ ¹æ®éœ€è¦æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯æˆ–æ‰§è¡Œå…¶ä»–æ“ä½œ
                } catch (e) {
                    console.error('è§£æç”¨æˆ·æ•°æ®å¤±è´¥:', e);
                }
            }
        }
        
        // åˆå§‹æ£€æŸ¥ç™»å½•çŠ¶æ€
        checkLoginStatus();
        
        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        const languageBtn = document.getElementById('language-btn');
        const languageDropdown = document.getElementById('language-dropdown');
        const currentLanguage = document.getElementById('current-language');
        const languageOptions = document.querySelectorAll('#language-dropdown a');
        let currentLang = localStorage.getItem('preferredLanguage') || 'zh';
        
        languageBtn.addEventListener('click', () => {
            languageDropdown.classList.toggle('hidden');
        });
        
        // ç‚¹å‡»å¤–éƒ¨å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', (e) => {
            if (!languageBtn.contains(e.target) && !languageDropdown.contains(e.target)) {
                languageDropdown.classList.add('hidden');
            }
        });
        
        // è¯­è¨€æ•°æ® - æ·»åŠ æ›´å¤šéªŒè¯é”™è¯¯ä¿¡æ¯å’ŒåŠŸèƒ½æç¤º
        const translations = {
            zh: {
                'login-title': 'ç²‰ä¸ç¤¾åŒº - ç™»å½•æ³¨å†Œ',
                'community-title': 'ç²‰ä¸ç¤¾åŒº',
                'community-welcome': 'åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºï¼Œä¸å…¶ä»–ç²‰ä¸ä¸€èµ·äº’åŠ¨',
                'login': 'ç™»å½•',
                'register': 'æ³¨å†Œ',
                'username': 'ç”¨æˆ·å',
                'username-placeholder': 'è¯·è¾“å…¥ç”¨æˆ·å',
                'email': 'é‚®ç®±',
                'email-placeholder': 'è¯·è¾“å…¥é‚®ç®±',
                'password': 'å¯†ç ',
                'password-placeholder': 'è¯·è¾“å…¥å¯†ç ',
                'set-password-placeholder': 'è¯·è®¾ç½®å¯†ç ',
                'remember-me': 'è®°ä½æˆ‘',
                'forgot-password': 'å¿˜è®°å¯†ç ï¼Ÿ',
                'agree-terms': 'æˆ‘å·²é˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–',
                'login-btn': 'ç™»å½•',
                'register-btn': 'æ³¨å†Œ',
                'or': 'æˆ–',
                'community-features': 'ç¤¾åŒºç‰¹è‰²',
                'fan-interaction': 'ç²‰ä¸äº’åŠ¨',
                'fan-interaction-desc': 'ä¸å…¶ä»–ç²‰ä¸äº¤æµï¼Œåˆ†äº«å¯¹Boomçš„å–œçˆ±',
                'exclusive-news': 'ç‹¬å®¶åŠ¨æ€',
                'exclusive-news-desc': 'è·å–Boomçš„æœ€æ–°æ¶ˆæ¯å’Œç‹¬å®¶å†…å®¹',
                'fan-benefits': 'ç²‰ä¸ç¦åˆ©',
                'fan-benefits-desc': 'å‚ä¸æ´»åŠ¨èµ¢å–å‘¨è¾¹ï¼Œæœ‰æœºä¼šä¸Boomè¿‘è·ç¦»æ¥è§¦',
                // éªŒè¯é”™è¯¯ä¿¡æ¯
                'username-required': 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º',
                'username-too-short': 'ç”¨æˆ·åè‡³å°‘éœ€è¦3ä¸ªå­—ç¬¦',
                'username-exists': 'ç”¨æˆ·åå·²å­˜åœ¨',
                'email-required': 'é‚®ç®±ä¸èƒ½ä¸ºç©º',
                'email-invalid': 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€',
                'email-exists': 'è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ',
                'password-required': 'å¯†ç ä¸èƒ½ä¸ºç©º',
                'password-weak': 'å¯†ç è‡³å°‘éœ€è¦8ä¸ªå­—ç¬¦ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—',
                'agree-terms-required': 'è¯·é˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–',
                'login-error': 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯',
                'login-success': 'ç™»å½•æˆåŠŸï¼',
                'register-success': 'æ³¨å†ŒæˆåŠŸï¼æ­£åœ¨è·³è½¬åˆ°ç™»å½•...',
                'forgot-password-message': 'è¯·è”ç³»ç®¡ç†å‘˜é‡ç½®å¯†ç ã€‚'
            },
            en: {
                'login-title': 'Fan Community - Login/Register',
                'community-title': 'Fan Community',
                'community-welcome': 'Join our community and interact with other fans',
                'login': 'Login',
                'register': 'Register',
                'username': 'Username',
                'username-placeholder': 'Enter username',
                'email': 'Email',
                'email-placeholder': 'Enter email',
                'password': 'Password',
                'password-placeholder': 'Enter password',
                'set-password-placeholder': 'Set password',
                'remember-me': 'Remember me',
                'forgot-password': 'Forgot Password?',
                'agree-terms': 'I have read and agree to the Terms of Service and Privacy Policy',
                'login-btn': 'Login',
                'register-btn': 'Register',
                'or': 'Or',
                'community-features': 'Community Features',
                'fan-interaction': 'Fan Interaction',
                'fan-interaction-desc': 'Connect with other fans and share your love for Boom',
                'exclusive-news': 'Exclusive Updates',
                'exclusive-news-desc': 'Get the latest news and exclusive content about Boom',
                'fan-benefits': 'Fan Benefits',
                'fan-benefits-desc': 'Participate in events to win merchandise and meet Boom',
                // Validation error messages
                'username-required': 'Username is required',
                'username-too-short': 'Username must be at least 3 characters',
                'username-exists': 'Username already exists',
                'email-required': 'Email is required',
                'email-invalid': 'Please enter a valid email address',
                'email-exists': 'This email is already registered',
                'password-required': 'Password is required',
                'password-weak': 'Password must be at least 8 characters with letters and numbers',
                'agree-terms-required': 'Please read and agree to the Terms of Service and Privacy Policy',
                'login-error': 'Invalid username or password',
                'login-success': 'Login successful!',
                'register-success': 'Registration successful! Redirecting to login...',
                'forgot-password-message': 'Please contact admin to reset your password.'
            },
            th: {
                'login-title': 'à¸Šà¸¸à¸¡à¸Šà¸™à¹à¸Ÿà¸™à¸„à¸¥à¸±à¸š - à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š/à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™',
                'community-title': 'à¸Šà¸¸à¸¡à¸Šà¸™à¹à¸Ÿà¸™à¸„à¸¥à¸±à¸š',
                'community-welcome': 'à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¸Šà¸¸à¸¡à¸Šà¸™à¸‚à¸­à¸‡à¹€à¸£à¸²à¹à¸¥à¸°à¸ªà¸™à¸—à¸™à¸²à¸à¸±à¸šà¹à¸Ÿà¸™à¸­à¸·à¹ˆà¸™à¹†',
                'login': 'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š',
                'register': 'à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™',
                'username': 'à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰',
                'username-placeholder': 'à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰',
                'email': 'à¸­à¸µà¹€à¸¡à¸¥',
                'email-placeholder': 'à¹ƒà¸ªà¹ˆà¸­à¸µà¹€à¸¡à¸¥',
                'password': 'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™',
                'password-placeholder': 'à¹ƒà¸ªà¹ˆà¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™',
                'set-password-placeholder': 'à¸•à¸±à¹‰à¸‡à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™',
                'remember-me': 'à¸ˆà¸”à¸ˆà¸³à¸‰à¸±à¸™',
                'forgot-password': 'à¸¥à¸·à¸¡à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™?',
                'agree-terms': 'à¸‰à¸±à¸™à¹„à¸”à¹‰à¸­à¹ˆà¸²à¸™à¹à¸¥à¸°à¸¢à¸­à¸¡à¸£à¸±à¸šà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸šà¸£à¸´à¸à¸²à¸£à¹à¸¥à¸°à¸™à¹‚à¸¢à¸šà¸²à¸¢à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§',
                'login-btn': 'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸š',
                'register-btn': 'à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™',
                'or': 'à¸«à¸£à¸·à¸­',
                'community-features': 'à¸„à¸¸à¸“à¸ªà¸¡à¸šà¸±à¸•à¸´à¸‚à¸­à¸‡à¸Šà¸¸à¸¡à¸Šà¸™',
                'fan-interaction': 'à¸›à¸à¸´à¸ªà¸±à¸¡à¸à¸±à¸™à¸˜à¹Œà¸£à¸°à¸«à¸§à¹ˆà¸²à¸‡à¹à¸Ÿà¸™',
                'fan-interaction-desc': 'à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸šà¹à¸Ÿà¸™à¸­à¸·à¹ˆà¸™à¹† à¹à¸¥à¸°à¹à¸šà¹ˆà¸‡à¸›à¸±à¸™à¸„à¸§à¸²à¸¡à¸£à¸±à¸à¸•à¹ˆà¸­ Boom',
                'exclusive-news': 'à¸‚à¹ˆà¸²à¸§à¸ªà¸²à¸£à¸à¸´à¹€à¸¨à¸©',
                'exclusive-news-desc': 'à¸£à¸±à¸šà¸‚à¹ˆà¸²à¸§à¸ªà¸²à¸£à¸¥à¹ˆà¸²à¸ªà¸¸à¸”à¹à¸¥à¸°à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¹€à¸‰à¸à¸²à¸°à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸š Boom',
                'fan-benefits': 'à¸ªà¸´à¸—à¸˜à¸´à¸à¸´à¹€à¸¨à¸©à¸‚à¸­à¸‡à¹à¸Ÿà¸™',
                'fan-benefits-desc': 'à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸šà¸‚à¸­à¸‡à¸ªà¸°à¸ªà¸¡à¹à¸¥à¸°à¹„à¸”à¹‰à¸à¸š Boom à¹ƒà¸™à¹à¸šà¸šà¹ƒà¸à¸¥à¹‰à¸Šà¸´à¸”',
                // à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸„à¸§à¸²à¸¡à¸œà¸´à¸”à¸à¸¥à¸²à¸”
                'username-required': 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰',
                'username-too-short': 'à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸„à¸§à¸²à¸¡à¸¢à¸²à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 3 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£',
                'username-exists': 'à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸™à¸µà¹‰à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§',
                'email-required': 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸­à¸µà¹€à¸¡à¸¥',
                'email-invalid': 'à¹‚à¸›à¸£à¸”à¸›à¹‰à¸­à¸™à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸­à¸µà¹€à¸¡à¸¥à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡',
                'email-exists': 'à¸­à¸µà¹€à¸¡à¸¥à¸™à¸µà¹‰à¸–à¸¹à¸à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¹à¸¥à¹‰à¸§',
                'password-required': 'à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™',
                'password-weak': 'à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸•à¹‰à¸­à¸‡à¸¡à¸µà¸„à¸§à¸²à¸¡à¸¢à¸²à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 8 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£ à¸›à¸£à¸°à¸à¸­à¸šà¸”à¹‰à¸§à¸¢à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£à¹à¸¥à¸°à¸•à¸±à¸§à¹€à¸¥à¸‚',
                'agree-terms-required': 'à¹‚à¸›à¸£à¸”à¸­à¹ˆà¸²à¸™à¹à¸¥à¸°à¸¢à¸­à¸¡à¸£à¸±à¸šà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸šà¸£à¸´à¸à¸²à¸£à¹à¸¥à¸°à¸™à¹‚à¸¢à¸šà¸²à¸¢à¸„à¸§à¸²à¸¡à¹€à¸›à¹‡à¸™à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§',
                'login-error': 'à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸«à¸£à¸·à¸­à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡',
                'login-success': 'à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸ªà¸³à¹€à¸£à¹‡à¸ˆ!',
                'register-success': 'à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! à¸à¸³à¸¥à¸±à¸‡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸›à¸¢à¸±à¸‡à¸«à¸™à¹‰à¸²à¸¥à¹‡à¸­à¸à¸­à¸´à¸™...',
                'forgot-password-message': 'à¸à¸£à¸¸à¸“à¸²à¸•à¸´à¸”à¸•à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¹€à¸à¸·à¹ˆà¸­à¸£à¸µà¹€à¸‹à¹‡à¸•à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¸‚à¸­à¸‡à¸„à¸¸à¸“.'
            }
        };

        // åˆ‡æ¢è¯­è¨€å‡½æ•°
        function changeLanguage(lang) {
            if (!translations[lang]) return;
            
            // æ›´æ–°é¡µé¢ä¸Šæ‰€æœ‰å¸¦æœ‰data-lang-keyå±æ€§çš„å…ƒç´ 
            document.querySelectorAll('[data-lang-key]').forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            let langText = 'ä¸­æ–‡';
            if (lang === 'en') {
                langText = 'English';
            } else if (lang === 'th') {
                langText = 'à¸ à¸²à¸©à¸²à¹„à¸—à¸¢';
            }
            
            currentLanguage.textContent = langText;
            languageDropdown.classList.add('hidden');
            
            // ä¿å­˜è¯­è¨€åå¥½åˆ°localStorage
            localStorage.setItem('preferredLanguage', lang);
        }

        // åˆå§‹åŒ–è¯­è¨€
        const savedLang = localStorage.getItem('preferredLanguage') || 'zh';
        changeLanguage(savedLang);
        
        // è¯­è¨€é€‰é¡¹ç‚¹å‡»äº‹ä»¶
        languageOptions.forEach(option => {
            option.addEventListener('click', (e) => {
                e.preventDefault();
                const lang = option.getAttribute('data-lang');
                changeLanguage(lang);
            });
        });
    </script>
</body>
</html>